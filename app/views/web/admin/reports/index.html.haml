%h1 Reports

%hr

.well
  = simple_form_for @search, default_search_form_options(url: admin_reports_path, html: {class: "form-inline"}) do |f|
    .form-group
      = f.input_field :city_id_eq, collection: City.all, include_blank: t('all_cities')
    .form-group
      = f.submit class: 'btn', value: "Search"

= paginate @reports

.table-responsive
  %table.table.table-striped.table-hover
    %thead
      %tr
        %th #
        %th= sort_link @search, :city_id, "City"
        %th= sort_link @search, :text, "Text"
        %th= sort_link @search, :time, "Date"
        %th= sort_link @search, :state, "State"
        %th= sort_link @search, :source_kind, "Source"
        %th= sort_link @search, :event_kind, "Event kind"
        %th
        %th

    %tbody
      - @reports.each do |report|
        %tr{ class: report.state_class }
          %td= report.id
          %td= report.city.name
          %td= report.text
          %td= report.published_date
          %td= report.state
          %td= report.source_kind
          %td= report.event_kind
          %td
            .btn-group-vertical
              = link_to 'Good', good_admin_report_path(report), class: 'btn btn-primary', method: :patch
              = link_to 'Bad', bad_admin_report_path(report), class: 'btn btn-default', method: :patch
          %td
            .btn-group-vertical
              = link_to 'Publish', publish_admin_report_path(report), class: 'btn btn-success', method: :patch
              = link_to 'Destroy', admin_report_path(report), destroy_button_params

= paginate @reports
